(this["webpackJsonpreact-weather-app"]=this["webpackJsonpreact-weather-app"]||[]).push([[0],{126:function(t,e,a){},127:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(13),i=a.n(c),s=a(165),o=a(59),l=a(11),u=a.n(l),d=a(20),j=a(30),p=a(162),h=a(25),f=a(62),b=a.n(f),m=a(67),v=a(8),x=a(63),O=a.n(x),g=function(t){return O()(t).format("LL")},_={forecasts:[]};var E={message:null};var y=a(19),C=function(t,e){return e.filter((function(e){return e.date===t.date}))},F=function(t,e){var a=t.map((function(t){return t.date}));return e.filter((function(t){return a.includes(t.date)}))},w={unit:"fahrenheit",pageIndex:0,activeForecastDt:0};var A=Object(m.a)({app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REPLACE_APP_FORECASTS":var a=e.forecasts;return _.forecasts=a.map((function(t){return t.date=g(t.dt_txt),t})),Object(v.a)({},_);default:return t}},alert:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"PUSH_ALERT_MESSAGE":return E.message=e.message,Object(v.a)({},E);case"CLEAR_ALERT_MESSAGE":return E.message=null,Object(v.a)({},E);default:return t}},forecast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REPLACE_FORECAST_UNIT":return w.unit=e.unit,Object(v.a)({},w);case"INCREMENT_FORECAST_PAGE_INDEX":return w.pageIndex=w.pageIndex+1,Object(v.a)({},w);case"DECREMENT_FORECAST_PAGE_INDEX":return w.pageIndex=w.pageIndex-1,Object(v.a)({},w);case"REPLACE_FORECAST_ACTIVE_FORECAST_DT":return w.activeForecastDt=e.dt,Object(v.a)({},w);default:return t}}}),S=Object(m.b)(A),N=function(t){S.dispatch({type:"PUSH_ALERT_MESSAGE",message:t})},T=function(){b.a.CancelToken.source().cancel()},R=function(){var t=Object(j.a)(u.a.mark((function t(e){var a,n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.get(e);case 3:return a=t.sent,t.abrupt("return",a.data);case 7:t.prev=7,t.t0=t.catch(0),n=t.t0.response,r=n?n.data.message:t.t0.message,N(r);case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),I=function(){var t=Object(j.a)(u.a.mark((function t(){var e,a,n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="".concat("https://api.openweathermap.org","/data/2.5/forecast"),40,a="".concat(e,"?q=").concat("Munich,de","&APPID=").concat("","&cnt=").concat(40,"&units=imperial"),t.next=5,R(a);case 5:return n=t.sent,r=n?n.list:[],t.abrupt("return",[r,T]);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),L=a(168),B=a(128),P=a.p+"static/media/loading.8261050f.svg",k=a(64),D=a.n(k),M=a(2);function W(){return Object(M.jsx)("div",{className:D.a.root,children:Object(M.jsxs)(L.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(M.jsx)("img",{className:D.a.loader,src:P,alt:"Four bubbles bouncing"}),Object(M.jsxs)(L.a,{display:"flex",flexDirection:"column",alignItems:"center",children:[Object(M.jsx)(B.a,{variant:"h6",align:"center",children:"Loading..."}),Object(M.jsx)(B.a,{color:"textSecondary",align:"center",children:"Please wait while we are collecting weather data for you!!"})]})]})})}var U=a(152),G=a(129),X=a(153),H=a(171);function q(t){var e=t.unit,a=t.onChange,n=function(t){var e=t.target.value;a(e)},r=function(t){return e===t};return Object(M.jsx)(U.a,{container:!0,justify:"center",children:Object(M.jsx)(U.a,{item:!0,xs:10,sm:6,children:Object(M.jsx)(L.a,{my:4,children:Object(M.jsx)(G.a,{variant:"outlined","data-testid":"unitSwitch",children:Object(M.jsxs)(U.a,{container:!0,justify:"center",spacing:2,children:[Object(M.jsx)(U.a,{item:!0,children:Object(M.jsx)(X.a,{name:"unit",value:"celsius",checked:r("celsius"),control:Object(M.jsx)(H.a,{onChange:n}),label:"Celsius","data-testid":"celsiusUnit"})}),Object(M.jsx)(U.a,{item:!0,children:Object(M.jsx)(X.a,{name:"unit",value:"fahrenheit",checked:r("fahrenheit"),control:Object(M.jsx)(H.a,{onChange:n}),label:"Fahrenheit","data-testid":"fahrenheitUnit"})})]})})})})})}var z=Object(n.memo)(q),Z=a(169),J=a(156),V=a(157),Y=a(85),K=a(154),Q=a(155),$=function(t,e){return"".concat(t," ").concat({fahrenheit:"\u2109",celsius:"\u2103"}[e])},tt=function(t,e){var a=t.main;return function(t,e){var a="fahrenheit"===e?t:5/9*(t-32);return Object(y.round)(a)}((a.temp_min+a.temp_max)/2,e)},et=a(66),at=a.n(et);function nt(t){var e,a=t.segments,n=t.forecast,r=t.unit,c=t.activeForecastDt,i=t.onClick,s=Object(Y.a)(),o=n.weather[0],l=(e=o.icon,"".concat("http://openweathermap.org","/img/wn/").concat(e,".png")),u=g(n.dt_txt),d=function(t,e){var a=t.reduce((function(t,a){return t+tt(a,e)}),0),n=Object(y.round)(a/t.length);return $(n,e)}(a,r),j=n.dt===c?s.palette.grey[100]:"";return Object(M.jsx)(U.a,{item:!0,xs:12,sm:4,children:Object(M.jsx)(K.a,{variant:"outlined",className:at.a.card,style:{backgroundColor:j},onClick:function(){i(n.dt)},"data-testid":"weatherCard",children:Object(M.jsxs)(Q.a,{children:[Object(M.jsx)(B.a,{variant:"h6",color:"secondary",children:d}),Object(M.jsx)(B.a,{variant:"h6",children:o.main}),Object(M.jsx)(B.a,{color:"textSecondary",children:o.description}),Object(M.jsx)("img",{className:at.a.icon,src:l,alt:"Current weather icon"}),Object(M.jsx)(B.a,{variant:"subtitle2",children:u})]})})})}var rt=a(86),ct=a.n(rt),it=function(t){var e=t.direction,a=t.onNavigate,n="button".concat(Object(y.capitalize)(e)),r="previous"===e?J.a:V.a;return Object(M.jsx)(Z.a,{"aria-label":"delete",className:ct.a.navigationButton,onClick:function(){a(e)},"data-testid":n,children:Object(M.jsx)(r,{})})};function st(t){var e=t.navigators,a=t.onNavigate,n=!e.includes("previous")&&e.includes("next")?"flex-end":"space-between",r=e.map((function(t){return Object(M.jsx)(U.a,{item:!0,children:Object(M.jsx)(it,{direction:t,onNavigate:a})},t)}));return Object(M.jsx)(U.a,{container:!0,justify:"center",children:Object(M.jsx)(U.a,{item:!0,xs:8,children:Object(M.jsx)(L.a,{mb:3,children:Object(M.jsx)(U.a,{container:!0,justify:n,children:r})})})})}function ot(t){var e=t.unit,a=t.segments,n=t.forecasts,r=t.navigators,c=t.activeForecastDt,i=t.onSelect,s=t.onNavigate;return Object(M.jsxs)(L.a,{"data-testid":"weatherCarousel",children:[Object(M.jsx)(st,{onNavigate:s,navigators:r}),Object(M.jsx)(U.a,{container:!0,spacing:3,children:n.map((function(t){var n=C(t,a);return Object(M.jsx)(nt,{forecast:t,segments:n,unit:e,activeForecastDt:c,onClick:i},t.dt)}))})]})}var lt=a(158),ut=a(159),dt=a(174),jt=a(166),pt=a(170),ht=a(160),ft=a(23),bt=a.n(ft),mt={select:lt.a,selectAll:ut.a,axisBottom:dt.a,scaleLinear:jt.a,axisLeft:dt.b,scaleBand:pt.a,max:ht.a},vt={width:0,height:0},xt=function(t){return t.replace(/[^A-Z0-9]+/gi,"").toLowerCase()},Ot=function(t){var e=t.chartId,a=void 0===e?"":e,r=t.data,c=t.width,i=t.height,s=t.left,l=t.top,u=t.right,j=t.bottom,p=t.fill,h=t.suffix,f=Object(n.useState)(c),b=Object(d.a)(f,2),m=b[0],v=b[1],x=Object(n.useState)(i),O=Object(d.a)(x,2),g=O[0],_=O[1],E=Object(n.useRef)(null),y=Object(n.useRef)(null),C=m-s-u,F=g-l-j,w=function(t){var e=Object(d.a)(t,1)[0].contentRect,a=e.width,n=e.height;console.log(a,n),n===g&&a===m||(console.log(a,n),v(a),_(n))};Object(n.useEffect)((function(){return R(),function(){}}),[r,m,g]),Object(n.useEffect)((function(){var t=new o.a(w),e=E.current;return t.observe(e),function(){t.unobserve(e),t.disconnect()}}),[E.current]);var A=function(t){var e,n=16,r=t.offsetX,c=t.offsetY,i=(null===(e=document.getElementById("".concat(a,"-tooltip")))||void 0===e?void 0:e.getBoundingClientRect())||vt,o=i.width,l=i.height;return{marginLeft:function(t,e,a){return Math.max(t,Math.min(a,e))}(n,r+n,C-o-n+s),marginTop:F>c+n+l?c+n:c-l-n}};function S(t){var e=t.target.__data__,n=A(t),r=n.marginLeft,c=n.marginTop;mt.select("#".concat(a,"-tooltip")).style("visibility","visible").style("top","".concat(c,"px")).style("left","".concat(r,"px")),mt.select("#".concat(a,"-point-wrapper .tooltip-title")).text("Temprature"),mt.select("#point-ls-".concat(xt(e.time))).style("display","flex"),mt.select("#point-ls-".concat(xt(e.time)," .pointer")).style("background-color",p).style("display","block"),mt.select("#point-ls-".concat(xt(e.time)," .point-label")).text("".concat(e.time,":")).style("display","block"),mt.select("#point-ls-".concat(xt(e.time)," .point-value")).text($(e.value,h)).style("display","block")}function N(t){var e=A(t),n=e.marginLeft,r=e.marginTop;mt.select("#".concat(a,"-tooltip")).style("top","".concat(r,"px")).style("left","".concat(n,"px"))}var T=function(){mt.selectAll(".point-ls").style("display","none"),mt.select("#".concat(a,"-tooltip")).style("visibility","hidden")},R=function(){var t=mt.select(y.current).select("#".concat(a,"-chart-wrapper")),e=mt.scaleBand().domain(r.map((function(t){return t.time}))).range([0,C]).padding(.1),n=mt.scaleLinear().domain([0,mt.max(r,(function(t){return t.value}))]).nice().rangeRound([F,0]);t.selectAll(".bar").data(r).attr("fill",p).attr("x",(function(t){return e(t.time)||0})).attr("width",e.bandwidth()).attr("y",(function(t){return n(t.value)})).attr("height",(function(t){return F-n(t.value)})).on("mouseover",S).on("mousemove",N).on("mouseout",T),t.select("#bottom-axis").attr("transform","translate(0,".concat(F,")")).call(mt.axisBottom(e)),t.select("#left-axis").call(mt.axisLeft(n).tickFormat((function(t){return $(t,h)})).ticks(5))};return Object(M.jsxs)("div",{id:"bar-chart-wrapper","data-testid":"barChart",className:bt.a.barChartWrapper,ref:E,children:[Object(M.jsx)("svg",{id:"bar-chart",style:{width:m,height:g},ref:y,children:Object(M.jsxs)("g",{id:"".concat(a,"-chart-wrapper"),transform:"translate(".concat(s,",").concat(l,")"),className:"chart-wrapper",children:[r.map((function(t){return Object(M.jsx)("rect",{className:"bar"},"".concat(xt(t.time),"-").concat(100*Math.random()))})),Object(M.jsx)("g",{id:"bottom-axis",className:"".concat(bt.a.axis," ").concat(bt.a.axisBottom)}),Object(M.jsx)("g",{id:"left-axis",className:bt.a.axis})]})}),Object(M.jsx)(G.a,{id:"".concat(a,"-tooltip"),className:bt.a.tooltipWrapper,children:Object(M.jsxs)("div",{id:"".concat(a,"-point-wrapper"),children:[Object(M.jsx)("div",{className:"point-title-wrapper",id:"".concat(a,"-point-title-wrapper"),children:Object(M.jsx)(B.a,{variant:"button",className:"tooltip-title",gutterBottom:!0})}),r.map((function(t){return Object(M.jsxs)("div",{id:"point-ls-".concat(xt(t.time)),className:"point-ls ".concat(bt.a.point),children:[Object(M.jsxs)("div",{className:bt.a.pointWrapper,children:[Object(M.jsx)("div",{className:"pointer ".concat(bt.a.pointer)}),Object(M.jsx)(B.a,{variant:"subtitle1",className:"point-label"})]}),Object(M.jsx)(B.a,{variant:"button",className:"point-value",color:"textPrimary"})]},"tooltip-item-".concat(xt(t.time),"-").concat(100*Math.random()))}))]})})]})};function gt(t){var e=function(t){var e=t.segments,a=t.unit,n=t.theme,r={data:e.map((function(t){return{time:(e=t.dt_txt,O()(e).format("LT")),value:tt(t,a)};var e})),color:n.palette.secondary.main,sufix:a};return Object(v.a)({},r)}({segments:t.segments,unit:t.unit,theme:Object(Y.a)()});return Object(M.jsx)(U.a,{container:!0,children:Object(M.jsx)(U.a,{item:!0,xs:12,children:Object(M.jsx)(L.a,{my:3,children:Object(M.jsx)(K.a,{variant:"outlined","data-testid":"weatherChart",children:Object(M.jsx)(Q.a,{children:Object(M.jsx)(L.a,{children:Object(M.jsx)(Ot,{chartId:"weather-chart",data:e.data,top:10,right:10,bottom:50,left:40,width:880,height:440,fill:e.color,suffix:e.sufix})})})})})})})}var _t=Object(n.memo)(gt,y.isEqual);var Et=Object(h.b)((function(t,e){var a=t.forecast,n={get dailyForecasts(){return Object(y.uniqBy)(e.forecasts,"date")},get activeForecasts(){var t=a.pageIndex;return this.dailyForecasts.splice(t,3)},get activeForecastsSegments(){return F(this.activeForecasts,e.forecasts)},get carouselNavigators(){var t=[],e=a.pageIndex>0,n=this.dailyForecasts[a.pageIndex+3];return e&&t.push("previous"),n&&t.push("next"),t},get activeForecast(){var t=a.activeForecastDt;return this.dailyForecasts.find((function(e){return e.dt===t}))||null},get activeForecastSegments(){return this.activeForecast?C(this.activeForecast,e.forecasts):[]}};return Object(v.a)(Object(v.a)({},a),n)}),{replaceUnit:function(t){return{type:"REPLACE_FORECAST_UNIT",unit:t}},incrementPageIndex:function(){return{type:"INCREMENT_FORECAST_PAGE_INDEX"}},decrementPageIndex:function(){return{type:"DECREMENT_FORECAST_PAGE_INDEX"}},replaceActiveForecastDt:function(t){return{type:"REPLACE_FORECAST_ACTIVE_FORECAST_DT",dt:t}}})((function(t){var e=t.forecasts,a=t.activeForecast,r=t.activeForecasts,c=t.activeForecastSegments,i=t.activeForecastsSegments,s=t.carouselNavigators,o=t.activeForecastDt,l=t.unit,u=t.replaceUnit,d=t.incrementPageIndex,j=t.decrementPageIndex,p=t.replaceActiveForecastDt,h=Object(n.useCallback)((function(t){u(t)}),[u]),f=Object(n.useCallback)((function(t){"next"===t?d():j()}),[d,j]);return Object(n.useEffect)((function(){!function(){var t=e[0].dt;p(t)}()}),[]),Object(M.jsxs)(n.Fragment,{children:[Object(M.jsx)(z,{unit:l,onChange:h}),Object(M.jsx)(ot,{forecasts:r,segments:i,unit:l,navigators:s,activeForecastDt:o,onNavigate:f,onSelect:function(t){p(t)}}),a&&Object(M.jsx)(_t,{forecast:a,segments:c,unit:l})]})})),yt=a(172),Ct=a(161);var Ft=Object(h.b)((function(t){var e=t.alert,a={isOpen:Boolean(t.alert.message)};return Object(v.a)(Object(v.a)({},e),a)}),{pushMessage:function(t){return{type:"PUSH_ALERT_MESSAGE",message:t}},clearMessage:function(){return{type:"CLEAR_ALERT_MESSAGE"}}})((function(t){var e=t.message,a=t.isOpen,n=t.clearMessage,r=function(){n()};return Object(M.jsx)(yt.a,{open:a,message:e,autoHideDuration:6e3,action:Object(M.jsx)(Z.a,{size:"small","aria-label":"close",color:"inherit",onClick:r,children:Object(M.jsx)(Ct.a,{fontSize:"small"})}),onClose:r,"data-testid":"alert"})}));var wt=Object(h.b)((function(t){var e=t.app,a={hasForecasts:Boolean(e.forecasts[0])};return Object(v.a)(Object(v.a)({},e),a)}),{replaceForecasts:function(t){return{type:"REPLACE_APP_FORECASTS",forecasts:t}}})((function(t){var e=t.hasForecasts,a=t.forecasts,r=t.replaceForecasts,c=null;function i(){return(i=Object(j.a)(u.a.mark((function t(){var e,a,n,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I();case 2:e=t.sent,a=Object(d.a)(e,2),n=a[0],i=a[1],c=i,n&&r(n);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(n.useEffect)((function(){return function(){i.apply(this,arguments)}(),function(){c&&c()}}),[]),Object(M.jsxs)(p.a,{maxWidth:"md",children:[e?Object(M.jsx)(Et,{forecasts:a}):Object(M.jsx)(W,{}),Object(M.jsx)(Ft,{})]})})),At=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,175)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;a(t),n(t),r(t),c(t),i(t)}))},St=a(164),Nt=a(163),Tt=Object(Nt.a)({typography:{fontFamily:"Inter, sans-serif"}});function Rt(t){var e=t.children;return Object(M.jsx)(h.a,{store:S,children:Object(M.jsx)(St.a,{theme:Tt,children:e})})}var It=a(41),Lt=a(42),Bt=a(44),Pt=a(45),kt=a(87),Dt=a.n(kt),Mt=function(t){Object(Bt.a)(a,t);var e=Object(Pt.a)(a);function a(t){var n;return Object(It.a)(this,a),(n=e.call(this,t)).state={message:null},n}return Object(Lt.a)(a,[{key:"render",value:function(){return this.state.message?Object(M.jsx)("div",{className:Dt.a.root,children:Object(M.jsxs)(L.a,{children:[Object(M.jsx)(B.a,{variant:"h6",children:"Something went wrong!"}),Object(M.jsx)(B.a,{color:"textSecondary",children:this.state.message})]})}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(t){return{message:t.message}}}]),a}(n.Component);a(126);i.a.render(Object(M.jsx)(r.a.StrictMode,{children:Object(M.jsxs)(Mt,{children:[Object(M.jsx)(Rt,{children:Object(M.jsx)(wt,{})}),Object(M.jsx)(s.a,{})]})}),document.getElementById("root")),At()},23:function(t,e,a){t.exports={barChartWrapper:"BarChart_barChartWrapper__2gviE",svg:"BarChart_svg__1i2Hh",tooltipWrapper:"BarChart_tooltipWrapper__XNkb7",point:"BarChart_point__1Buei",pointWrapper:"BarChart_pointWrapper__1-U2B",pointer:"BarChart_pointer__1tDvo",axis:"BarChart_axis__3MvIL",axisBottom:"BarChart_axisBottom__1QYu_"}},64:function(t,e,a){t.exports={root:"Loading_root__3ehdt",loader:"Loading_loader__jPoa6"}},66:function(t,e,a){t.exports={card:"Weather_card__pk4ps",icon:"Weather_icon__39CeW"}},86:function(t,e,a){t.exports={navigationButton:"Carousel_navigationButton__KumsZ"}},87:function(t,e,a){t.exports={root:"ErrorBoundary_root__29Znu"}}},[[127,1,2]]]);
//# sourceMappingURL=main.56b967ea.chunk.js.map